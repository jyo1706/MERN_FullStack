import{u as p,r as a,a as i,j as t,d as u,F as j,n as y,f,S as N}from"./vendor-D_SluWwt.js";/* empty css                  */import{T as g}from"./TotalPrice-spOR_qht.js";import{Q as C,B as v,C as b,P as k}from"./index-BosGv7D6.js";function E(){const n=p(),{quantityState:l,quantityDispatch:r}=a.useContext(C),{btnDispatch:o}=a.useContext(v),{cartDispatch:d}=a.useContext(b),{paymentDispatch:m}=a.useContext(k);a.useEffect(()=>{o({type:"btn",payload:!0}),m({type:"payment",payload:!0})},[n]),a.useEffect(()=>{i.get("https://mern-fullstack-1-j3k1.onrender.com/addTocard",{withCredentials:!0}).then(e=>{h(e.data)}).catch(e=>{n("/login"),console.log(e)})},[]);const x=e=>{i.get(`https://mern-fullstack-1-j3k1.onrender.com/deleteProduct/${e}`,{withCredentials:!0}).then(()=>{N.fire({title:"Product remove form cart",icon:"warning",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"ok!"}),n(0)}).catch(c=>console.log(c))},[s,h]=a.useState([]);return a.useEffect(()=>{const e=s.data&&s.data.length;d({type:"cart",payload:e})},[]),localStorage.setItem("BuyNow","true"),t.jsx(t.Fragment,{children:s.data&&s.data?s.data&&s.data.length<1?t.jsx("div",{className:"container cartEmpty",children:t.jsxs("div",{className:"",children:[t.jsx("h5",{className:"text-center",children:"Cart is empty"}),t.jsx(u,{to:"/",children:t.jsx("button",{className:"btn btn-primary",children:"Continue Shopping"})})]})}):t.jsxs("div",{className:"productDetailContainer container",children:[t.jsx("div",{className:"product",children:t.jsxs("div",{className:"",children:[t.jsx("h1",{children:"Product Detail"}),s.data&&s.data.map((e,c)=>t.jsxs("div",{className:"productItem",children:[t.jsx("div",{className:"productImg",children:t.jsx("img",{src:e.image.url,alt:""})}),t.jsxs("div",{className:"productDetail",children:[t.jsx("h5",{children:e.name}),t.jsxs("span",{children:["â‚¹",Math.ceil(e.price-e.price*e.original_price/100)]}),"   ",t.jsx("div",{className:"offer",children:t.jsxs("span",{children:[t.jsx("del",{children:e.original_price})," off"]})}),t.jsxs("div",{className:"quantity m-3 mt-0 mb-0",children:[t.jsx("span",{children:"Quantity:"}),t.jsxs("div",{className:"quantityBtn",style:{marginLeft:"10px"},children:[t.jsx("button",{className:"btn",onClick:()=>{r({type:"decrement",payload:e._id})},children:t.jsx("span",{className:"text-black",children:"-"})}),t.jsx("span",{children:l[e._id]||e.quantity}),t.jsx("button",{className:" btn",onClick:()=>{r({type:"increment",payload:e._id})},children:t.jsx("span",{className:"text-black",children:"+"})})]})]}),t.jsxs("div",{className:"removebtn",children:[t.jsx(j,{icon:y,style:{color:"grey"}}),t.jsx("button",{className:"",onClick:()=>x(e._id),children:t.jsx("span",{children:"Remove"})})]})]})]},c))]})}),t.jsx("div",{className:"",children:t.jsx(g,{})})]}):t.jsx("div",{className:"text-center mt-5",children:t.jsx(f,{})})})}export{E as default};

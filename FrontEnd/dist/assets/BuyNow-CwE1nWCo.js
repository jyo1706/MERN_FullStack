import{u as v,r,g as f,a as h,S as N,j as e,F as y,p as b,d as p}from"./vendor-D_SluWwt.js";/* empty css               *//* empty css                  */import{Q as C,B as k}from"./index-BosGv7D6.js";function P(){const x=v(),{quantityState:d,quantityDispatch:m}=r.useContext(C),{btnDispatch:_}=r.useContext(k),l=f().id,[n,j]=r.useState();r.useEffect(()=>{_({type:"btn",payload:!0}),localStorage.setItem("page","buynow")},[]),r.useEffect(()=>{h.get(`https://mern-fullstack-1-j3k1.onrender.com/buyNow/${l}`,{withCredentials:!0}).then(s=>{s.data.user.role==="admin"?(N.fire({title:"user page",icon:"warning",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"ok!"}),x(window.history.back())):g(s.data.data)}).catch(s=>{x("/login"),console.log(s)})},[]),r.useEffect(()=>{const s=localStorage.getItem("id");s?(h.get(`https://mern-fullstack-1-j3k1.onrender.com/findAddress/${s}`,{withCredentials:!0}).then(t=>{j(t.data.data)}).catch(t=>console.log(t)),localStorage.removeItem("id")):h.get("https://mern-fullstack-1-j3k1.onrender.com/findAddress",{withCredentials:!0}).then(t=>{j(t.data.data[0])}).catch(t=>console.log(t))},[]);const[a,g]=r.useState([]),c=a&&a.price,i=a&&a.original_price,o=a&&a._id,u=a&&a.image;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"review",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h6",{children:"1"}),e.jsx("label",{children:"Review"})]}),e.jsx("div",{style:{fontSize:"10px",marginTop:"-10px",color:"grey"},children:"_____________________________________________"}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"",children:[e.jsx("h6",{children:"2"}),e.jsx("label",{children:"Payment"})]})})]}),u&&n&&e.jsxs("div",{className:"productDetailContainer container",children:[e.jsx("div",{className:"product",children:e.jsxs("div",{className:"",children:[e.jsx("h1",{children:"Product Detail"}),e.jsxs("div",{className:"productItem",children:[e.jsx("div",{className:"productImg",children:e.jsx("img",{src:u.url,alt:""})}),e.jsxs("div",{className:"productDetail",children:[e.jsx("h5",{children:a&&a.name}),e.jsxs("span",{children:["₹",Math.round(c-c*i/100)]}),e.jsx("div",{className:"offer px-1",children:e.jsx("del",{children:e.jsx("span",{children:c})})}),e.jsx("div",{className:"offer",style:{color:"green",fontWeight:"500"},children:e.jsxs("span",{children:[i,"off"]})}),e.jsxs("div",{className:"quantity m-3 mt-0 mb-0",children:[e.jsx("span",{children:"Quantity:"}),e.jsxs("div",{className:"quantityBtn",style:{marginLeft:"10px"},children:[e.jsx("button",{className:"btn",onClick:()=>{m({type:"decrement",payload:o})},children:e.jsx("span",{className:"text-black",children:"-"})}),e.jsx("span",{children:d[o]||1}),e.jsx("button",{className:" btn",onClick:()=>{m({type:"increment",payload:o})},children:e.jsx("span",{className:"text-black",children:"+"})})]})]})]})]}),e.jsxs("div",{className:"address mt-5",children:[e.jsxs("div",{className:"addressHeading",children:[e.jsxs("div",{children:[e.jsx(y,{style:{fontSize:"30px"},icon:b})," ",e.jsx("h3",{children:"Delivery Address"})]}),e.jsx(p,{to:`/addAddress/${l}`,children:e.jsx("h6",{onClick:()=>{localStorage.setItem("BuyNow","false")},children:"Change"})})]}),e.jsxs("div",{className:"addressDetail",children:[e.jsx("h5",{children:n.name}),e.jsxs("h6",{children:[n.address.house_no,",",n.address.area,",",n.address.state,",",n.address.pincode]}),e.jsx("h6",{children:n.mobile})]})]})]})}),e.jsx("div",{className:"",children:e.jsx("div",{className:"total",children:e.jsxs("div",{className:"totalContainer",children:[e.jsx("h4",{children:"Product Detail"}),e.jsxs("div",{className:"totalPrice",children:[e.jsx("h5",{style:{borderBottom:"2px dotted grey"},children:"Total Product Price:"}),e.jsxs("span",{children:["+ ₹",c*Object.values(d).map(s=>s===0?1:s).reduce((s,t)=>s*t,1)]})]}),e.jsxs("div",{className:"totalPrice mb-0",style:{color:"green"},children:[e.jsx("h5",{style:{color:"green",borderBottom:"2px dotted green"},children:"Total Discount"}),e.jsxs("span",{children:["-₹",Math.ceil(c*Object.values(d).map(s=>s===0?1:s).reduce((s,t)=>s*t,1)*i/100)]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"order",children:[e.jsx("h5",{children:"Order Total:"}),e.jsxs("span",{children:["₹",c*Object.values(d).map(s=>s===0?1:s).reduce((s,t)=>s*t,1)-Math.ceil(c*Object.values(d).map(s=>s===0?1:s).reduce((s,t)=>s*t,1)*i/100)]})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-center text-success",children:"You Save :"}),e.jsx("span",{className:"btnHeading",children:"Clicking on 'Continue' will not deduct any money"}),e.jsx(p,{to:`/payment/${l}`,children:e.jsx("button",{className:"form-button d-block my-2 conBtn",children:"Continue"})})]})]})})})]})]})}export{P as default};

import{r,u as p,e as g,a as o,j as e,d as c,L as f,f as y,y as D}from"./vendor-D_SluWwt.js";import{U as b}from"./index-BosGv7D6.js";import{P as N}from"./ProductHeader-BNOot3Zw.js";const _=()=>{const[n,h]=r.useState(),a=p();let x=1;const{search:l}=r.useContext(b),m=g();function j(t){var d;o.get(`https://mern-fullstack-1-j3k1.onrender.com/deleteData/${t}`,{withCredentials:!0}).then(i=>{i.data.message==="Data Delete Successfully"&&a("/displayData",{state:{message:i.data.message}})}).catch(i=>console.log(i));const u=(d=m.state)==null?void 0:d.message;D.success(u)}r.useEffect(()=>{o.get("https://mern-fullstack-1-j3k1.onrender.com/displayData",{withCredentials:!0}).then(t=>{t.data.userData.role==="user"&&a("/login"),t.data.userData.role==="admin"&&h(t.data.data)}).catch(t=>{console.log(t),t.response.data.status===401&&a("/login")})},[a]);const s=n&&n.filter(t=>t.name.includes(l.charAt(0).toUpperCase()+l.slice(1)));return e.jsxs(e.Fragment,{children:[e.jsx(N,{}),s?e.jsxs("div",{className:"container-fluid my-5 table-container",children:[e.jsx("h1",{className:"text-center text-blue m-auto",style:{backgroundColor:"688bf9"},children:"Display Data"}),e.jsx(c,{to:"/product",className:"btn btn-success addbtn",children:"Add Item"}),e.jsxs("table",{className:"table m-4 text-center bg-white",children:[e.jsx("thead",{className:"",children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{children:"No."}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Full Detail"}),e.jsx("th",{children:"original_Price"}),e.jsx("th",{children:"Discount"}),e.jsx("th",{children:"Final_Price"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Delivery_Charge"}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:s&&s.length===0?e.jsx("span",{className:"text-center",style:{fontSize:"15px",color:"grey",wordSpacing:"2px",letterSpacing:"-1px"},children:"sorry product not available"}):s&&s.map(t=>e.jsxs("tr",{className:"",children:[e.jsx("td",{children:x++}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.des}),e.jsx("td",{children:t.price}),e.jsxs("td",{children:[t.original_price,"%"]}),e.jsx("td",{children:Math.ceil(t.price-t.price*t.original_price/100)}),e.jsx("td",{children:t.quantity}),e.jsx("td",{children:t.deliveryCharge}),e.jsx("td",{children:e.jsx("img",{src:t.image.url,alt:t.name,style:{width:"60px",height:"60px"}})}),e.jsxs("td",{className:"",children:[e.jsx(c,{to:`/productEdit/${t._id}`,className:"btn btn-warning m-1",children:"Edit"}),e.jsx(c,{to:"",onClick:()=>j(t._id),className:"btn btn-danger m-2",children:"Delete"})]})]},t.id))})]}),e.jsx(f,{position:"top-center"})]}):e.jsx("div",{className:"text-center m-5 ",children:e.jsx(y,{className:"loader"})})]})};export{_ as default};

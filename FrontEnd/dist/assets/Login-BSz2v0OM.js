import{r as t,u as f,j as e,d,L as v,a as w,y as N}from"./vendor-D_SluWwt.js";import{v as y}from"./Validation-ES2tRG9Y.js";import{U as S}from"./index-BosGv7D6.js";const F=({setUserName:C})=>{const[n,i]=t.useState("password"),[o,m]=t.useState({}),[b,p]=t.useState(""),{loginState:E,loginDispatch:r}=t.useContext(S),l=f(),x=s=>{s.preventDefault();const g=s.target,u=new FormData(g),c=Object.fromEntries(u.entries());let j=y(c);m(j),w.post("https://mern-fullstack-1-j3k1.onrender.com/login",c,{withCredentials:!0}).then(a=>{localStorage.setItem("username",a.data.data.name),localStorage.setItem("role",a.data.data.role),a.data.data.role==="admin"&&l("/displayData"),a.data.data.role==="user"&&l("/")}).catch(a=>{console.log(p(a.response.data.message)),N.error(a.response.data.message)})},h=()=>{n=="password"?i("text"):i("password")};return t.useEffect(()=>{r({type:"user",payload:!1});const s=localStorage.getItem("username");s&&r(s?{type:"user",payload:!0}:{type:"user",payload:!1})}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"main",children:[e.jsx("div",{className:"bg-white container login-container res-container pt-1 p-3",children:e.jsxs("div",{className:"form-container",children:[e.jsx("h3",{className:"heading",style:{marginBottom:"30px"},children:"Login"}),e.jsx("form",{onSubmit:x,method:"post",children:e.jsxs("div",{className:"pt-1 p-5 form-inner-container",children:[e.jsx("div",{className:"",children:e.jsx("input",{type:"text",name:"email",placeholder:"example@gmail.com"})}),o.email&&e.jsx("p",{className:"text-danger validation",children:e.jsx("i",{children:o.email})}),e.jsxs("div",{className:"password",children:[e.jsx("input",{type:n,name:"password",placeholder:"password",autoComplete:"off"}),o.password&&e.jsx("p",{className:"text-danger validation",children:e.jsx("i",{children:o.password})}),e.jsx("svg",{className:"",id:"passwordEye",onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:e.jsx("path",{d:"M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"})})]}),e.jsxs("div",{className:"text-center d-flex flex-column text-decoration-none",children:[e.jsx(d,{to:"/forgetpass",children:e.jsx("span",{className:"",children:"Forget Password"})}),e.jsx(d,{to:"/registration",children:e.jsx("span",{className:"",children:"Signup"})})]}),e.jsx("div",{className:"",children:e.jsx("button",{className:"form-button",type:"submit",children:"Submit"})})]})})]})}),e.jsx(v,{position:"top-center"})]})})};export{F as default};

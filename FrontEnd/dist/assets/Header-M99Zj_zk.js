import{u,r as d,e as p,j as s,d as e,F as t,i as h,k as f,l as g,m as N,a as b}from"./vendor-D_SluWwt.js";import{U as v}from"./index-CdPhSO8q.js";function k({data:n}){const x=u(),{loginState:a,loginDispatch:r,setSearch:m}=d.useContext(v),i=localStorage.getItem("username"),c=localStorage.getItem("role"),j=p();d.useEffect(()=>{r(i?{type:"user",payload:!0}:{type:"user",payload:!1})},[i]);function o(){b.get("https://mern-fullstack-1-j3k1.onrender.com/logout",{withCredentials:!0}).then(l=>{l.data.message==="logout"&&(x("/"),localStorage.removeItem("username"),localStorage.removeItem("role"))}).catch(l=>console.log(l))}return s.jsx(s.Fragment,{children:s.jsx("div",{className:"header container-fluid ",children:s.jsxs("div",{className:"header-inner",children:[s.jsx("div",{className:"",children:s.jsx("div",{className:"logo",children:s.jsx("h3",{children:"Shopping"})})}),s.jsxs("div",{className:"",children:[j.pathname==="/"&&s.jsx("div",{className:"search",children:s.jsx("input",{type:"text",className:"form-control searchBar",name:"search",onChange:l=>m(l.target.value),placeholder:"Search...",style:{marginBottom:"0px"}})}),s.jsxs("ul",{className:"header-ul",id:"navbarSupportedContent",style:{marginBottom:"0"},children:[s.jsx(e,{to:"/",children:s.jsxs("li",{children:[s.jsx("span",{children:s.jsx(t,{className:"icon",icon:h})}),"Home"]})}),c==="admin"&&s.jsx(e,{to:"/displayData",children:s.jsxs("li",{children:[s.jsx("span",{children:s.jsx(t,{className:"icon",icon:h})}),"Display"]})}),s.jsxs("li",{className:"nav-item dropdown",children:[s.jsxs(e,{className:"nav-link",href:"#","data-bs-toggle":"dropdown",children:[s.jsx("span",{children:s.jsx(t,{className:"icon",icon:f})}),"Profile"]}),s.jsxs("ul",{className:"dropdown-menu px-3",children:[s.jsx(e,{to:"/",children:a&&s.jsx("li",{className:"text-black",children:i})}),c==="user"&&s.jsxs(e,{to:"/orders",children:[a&&s.jsx("li",{className:"text-black",children:"MyOrders"}),"  "]}),a?s.jsx(e,{className:"text-white",type:"submit",onClick:o,children:s.jsx("li",{className:"lastLi text-black",children:"Logout"})}):s.jsx(e,{to:"/login ",className:"text-white",type:"submit",children:s.jsx("li",{className:"lastLi text-black",children:"Login"})})]})]}),c==="user"&&s.jsx(e,{to:"/addToCard",children:s.jsxs("li",{children:[s.jsxs("span",{children:[n>=1&&s.jsx("sup",{className:"cartSub",children:s.jsx("span",{children:n})}),s.jsx(t,{className:"icon supIcon",icon:g})]}),s.jsx("span",{children:"Cart"})]})})]}),s.jsx("div",{className:"offcanvas offcanvas-end",id:"demo",children:s.jsx("div",{className:"offcanvas-body",children:s.jsxs("ul",{style:{marginBottom:"0"},children:[s.jsx(e,{to:"/",type:"button",children:s.jsx("li",{className:"text-reset mt-2","data-bs-dismiss":"offcanvas",children:s.jsx("h6",{children:"Home"})})}),s.jsx(e,{to:"/orders",children:a&&s.jsx("li",{className:"text-reset mt-2","data-bs-dismiss":"offcanvas",children:s.jsx("h6",{children:"MyOrders"})})}),c==="user"&&s.jsx(e,{to:"/addToCard",children:s.jsxs("li",{className:"text-reset mt-2","data-bs-dismiss":"offcanvas",children:[s.jsx("span",{children:n>=1&&s.jsx("sup",{className:"cartSub",children:s.jsx("span",{children:n})})}),s.jsx("span",{children:s.jsx("h6",{children:"Cart"})})]})}),s.jsx(e,{to:"",children:a&&s.jsx("li",{children:s.jsx("h6",{children:i})})}),a?s.jsx(e,{type:"submit",onClick:o,className:"w-100",children:s.jsx("li",{className:"text-black text-reset mt-2","data-bs-dismiss":"offcanvas",children:s.jsx("h6",{children:"Logout"})})}):s.jsx(e,{to:"/login",type:"submit",children:s.jsx("li",{className:"text-reset mt-2","data-bs-dismiss":"offcanvas",children:s.jsx("h6",{children:"Login"})})})]})})}),s.jsx("button",{className:"btn  headerBtn d",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#demo",children:s.jsx(t,{className:"icon",icon:N,style:{fontSize:"25px"}})})]})]})})})}export{k as default};
